(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80c69876"],{"0d77":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"gallery"},[i("button",{staticClass:"gallery__up",attrs:{type:"button"},on:{click:e.scrollUp}}),e.isSlider?i("gallery-slider",{attrs:{slide:e.slide,index:e.index},on:{close:e.closeSlider,nextSlide:e.nextSlide,prevSlide:e.prevSlide}}):e._e(),e.visible?i("transition",{attrs:{name:"fade"}},[i("Modal",{attrs:{post:e.post},on:{close:e.addNewItem,refresh:e.refresh,onSubmit:e.onSubmit,editPost:e.editPost}})],1):e._e(),i("div",{staticClass:"container"},[i("div",{staticClass:"gallery__title-wrapper"},[i("h1",{staticClass:"title gallery__title"},[e._v("Gallery")]),e.$store.state.auth.user.loggedIn?i("button",{staticClass:"gallery__add",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.addNewItem.apply(null,arguments)}}},[e._v("+ Add new item")]):e._e()]),e.gallery.length?i("div",{staticClass:"gallery__list"},e._l(e.gallery,(function(t,r){return i("div",{key:r,staticClass:"gallery__item"},[i("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.image,expression:"item.image",arg:"background-image"}],ref:"item",refInFor:!0,staticClass:"gallery__item-wrapper",on:{click:function(i){return i.preventDefault(),e.showSlide(t,r,i)}}},[e.$store.state.auth.user.loggedIn?i("button",{staticClass:"gallery__item-delete",on:{click:function(i){return i.preventDefault(),e.deletePost(t.id)}}},[e._v("✖")]):e._e(),e.$store.state.auth.user.loggedIn?i("button",{staticClass:"gallery__item-delete edit",on:{click:function(i){return i.preventDefault(),e.openUpdatePost(t)}}},[i("Edit")],1):e._e(),i("div",{staticClass:"gallery__item-text"},[e._v(e._s(t.description?t.description:t.title))])])])})),0):i("div",{staticClass:"gallery__empty"},[e._v("Art not found")])])],1)},n=[],s=i("5530"),l=i("1da1"),a=(i("c740"),i("96cf"),i("714b")),o=i("ce96"),c=i("66d5"),d=i.n(c),u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{ref:"slider",staticClass:"gallery__slider"},[i("div",{staticClass:"gallery__slider-wrapper"},[i("div",{staticClass:"gallery__slider-control"},[i("button",{staticClass:"gallery__slider-zoom",attrs:{type:"button"},on:{click:function(t){e.isZoom=!e.isZoom}}},[e._v(" "+e._s(e.isZoom?"-":"+")+" zoom")]),i("span",{staticClass:"gallery__slider-text"},[e._v(e._s(e.slide.description?e.slide.description:e.slide.title))]),i("button",{staticClass:"gallery__slider-close",on:{click:function(t){return t.preventDefault(),e.$emit("close")}}},[e._v("✖")])]),i("div",{staticClass:"gallery__slider-content"},[i("img",{class:["gallery__slider-image",{zoom:e.isZoom}],attrs:{src:e.slide.image}})]),i("div",{staticClass:"gallery__slider-arrows"},[i("button",{staticClass:"gallery__slider-arrow prev",attrs:{type:"button"},on:{click:function(t){return e.$emit("prevSlide",{slide:e.slide,index:e.index})}}}),i("button",{staticClass:"gallery__slider-arrow next",attrs:{type:"button"},on:{click:function(t){return e.$emit("nextSlide",{slide:e.slide,index:e.index})}}})])])])},p=[],f={name:"GallerySlider",data:function(){return{isZoom:!1}},props:["slide","index"],mounted:function(){var e=this;document.addEventListener("click",(function(t){t.target===e.$refs.slider&&e.$emit("close")}))}},g=f,h=i("2877"),_=Object(h["a"])(g,u,p,!1,null,null,null),y=_.exports,m={name:"Gallery",metaInfo:function(){return{title:"Gallery",titleTemplate:"Zoe | %s"}},components:{GallerySlider:y,Modal:a["a"],Edit:d.a},data:function(){return{visible:!1,post:null,gallery:[],isSlider:!1,index:null,slide:""}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.refresh();case 2:document.addEventListener("scroll",(function(){Object(o["a"])(".gallery__up")&&(window.pageYOffset>window.innerHeight?(Object(o["a"])(".gallery__up").style.opacity="1",Object(o["a"])(".gallery__up").style.visibility="visible"):(Object(o["a"])(".gallery__up").style.opacity="0",Object(o["a"])(".gallery__up").style.visibility="hidden"))}));case 3:case"end":return t.stop()}}),t)})))()},methods:{scrollUp:function(){window.scrollTo({top:0,behavior:"smooth"})},nextSlide:function(e){var t=e.slide,i=e.index;i!==this.gallery.length-1&&(this.index=this.gallery.findIndex((function(e){return e.id===t.id}))+1,this.slide=this.gallery[i+1])},prevSlide:function(e){var t=e.slide,i=e.index;i&&(this.index=this.gallery.findIndex((function(e){return e.id===t.id}))-1,this.slide=this.gallery[i-1])},showSlide:function(e,t,i){i.target===this.$refs.item[t]&&e&&(this.index=t,this.slide=e,this.isSlider=!0)},refresh:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("gallery/fetchGallery",{path:e.$route.path});case 2:e.gallery=t.sent;case 3:case"end":return t.stop()}}),t)})))()},addNewItem:function(){this.visible=!this.visible,this.post=null},closeSlider:function(){this.isSlider=!1,this.slide=null},deletePost:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!e){i.next=5;break}return i.next=3,t.$store.dispatch("gallery/deletePost",{id:e,path:t.$route.path});case 3:return i.next=5,t.refresh();case 5:case"end":return i.stop()}}),i)})))()},openUpdatePost:function(e){e&&(this.visible=!0,this.post=e)},onSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$store.dispatch("gallery/uploadData",Object(s["a"])(Object(s["a"])({},e),{},{path:t.$route.path}));case 2:case"end":return i.stop()}}),i)})))()},editPost:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,t.$store.dispatch("gallery/editPost",Object(s["a"])(Object(s["a"])({},e),{},{path:t.$route.path}));case 2:case"end":return i.stop()}}),i)})))()}},watch:{isSlider:function(e){Object(o["a"])("body").style.overflow=e?"hidden":""}}},v=m,b=Object(h["a"])(v,r,n,!1,null,null,null);t["default"]=b.exports},c740:function(e,t,i){"use strict";var r=i("23e7"),n=i("b727").findIndex,s=i("44d2"),l="findIndex",a=!0;l in[]&&Array(1)[l]((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s(l)}}]);